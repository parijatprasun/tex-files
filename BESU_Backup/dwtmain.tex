% Remember to use the lgrind style

\Head{}
\File{.\,./dwt/main.c}{2006}{4}{29}{0:44}{2636}
\L{\LB{\C{}/********************************************************}}
\L{\LB{_*_File:_dwt/main.c}}
\L{\LB{_*_Input_file(s):_1,_from_command_line}}
\L{\LB{_*_Output_file(s):_2,_{`}trfl{'}_and_input_file_name_with_}}
\L{\LB{_*_appended_level_number}}
\L{\LB{_*_Purpose:_Discrete_Wavelet_Transform}}
\L{\LB{_*_Wavelet:_Generalized_Daubechies_dbn}}
\L{\LB{_*******************************************************/\CE{}}}
\L{\LB{}}
\L{\LB{\K{\#include}_\<\V{stdio}.\V{h}\>}}
\L{\LB{\K{\#include}_\<\V{stdlib}.\V{h}\>}}
\L{\LB{\K{\#include}_\<\V{math}.\V{h}\>}}
\L{\LB{\K{\#include}_\<\V{string}.\V{h}\>}}
\L{\LB{\K{\#include}_\S{}\3dwt.h\3\SE{}}}
\L{\LB{}}
\index{main}\Proc{main}\L{\LB{\K{int}_\V{main}(\K{int}_\V{argc},_\K{char}_**\V{argv})_}}
\L{\LB{\{}}
\L{\LB{}\Tab{4}{\V{FILE}_*\V{in};}\Tab{16}{\C{}/*_input_file_pointer_*/\CE{}}}
\L{\LB{}\Tab{4}{\V{FILE}_*\V{out1};}\Tab{16}{\C{}/*_output_file_pointer_*/\CE{}}}
\L{\LB{}\Tab{4}{\V{FILE}_*\V{out2};}\Tab{16}{\C{}/*_output_file_pointer_*/\CE{}}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\K{double}_*\V{f};}\Tab{16}{\C{}/*_input_data_*/\CE{}}}
\L{\LB{}\Tab{4}{\K{double}_*\V{a},_*\V{d};}\Tab{20}{\C{}/*_trend_and_fluctuation_subsignals_*/\CE{}}}
\L{\LB{}\Tab{4}{\K{double}_*\V{A},_*\V{D};}\Tab{20}{\C{}/*_averaged_\&_detail_signals_*/\CE{}}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\K{int}_\V{n}=\N{0};}\Tab{16}{\C{}/*_length_of_data,_first_initialized_*/\CE{}}}
\L{\LB{}\Tab{4}{\K{int}_\V{c},\V{i};}\Tab{16}{\C{}/*_counters_*/\CE{}}}
\L{\LB{}\Tab{4}{\K{int}_\V{nh};}\Tab{16}{\C{}/*_length_of_each_subsignal_*/\CE{}}}
\L{\LB{}\Tab{4}{\K{int}_\V{vanish}=\V{atoi}(\V{argv}[\N{2}]);}\Tab{32}{\C{}/*_vanishing_moments_*/\CE{}}}
\L{\LB{}\Tab{4}{\K{int}_\V{level}=\V{atoi}(\V{argv}[\N{3}]);}\Tab{32}{\C{}/*_level_of_transform_*/\CE{}}}
\L{\LB{}}
\L{\LB{}\Tab{4}{\V{in}=\V{fopen}(\V{argv}[\N{1}],\S{}\3r\3\SE{});}\Tab{28}{\C{}/*_file_containing_input_data_*/\CE{}}}
\L{\LB{}\Tab{4}{\V{out1}=\V{fopen}(\S{}\3trfl\3\SE{},\S{}\3w\3\SE{});}\Tab{28}{\C{}/*_stores_a_and_d_subsignals_*/\CE{}}}
\L{\LB{}\Tab{4}{\V{out2}=\V{fopen}(\V{strcat}(\V{argv}[\N{1}],\V{argv}[\N{3}]),\S{}\3w\3\SE{});_\C{}/*_stores_A_and_D_*/\CE{}}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\K{while}((\V{c}=\V{fgetc}(\V{in}))_!=_\V{EOF})\{}}
\L{\LB{}\Tab{8}{\K{if}(\V{c}_==_\S{}{'}\2n{'}\SE{})}}
\L{\LB{}\Tab{12}{++\V{n};}\Tab{20}{\C{}/*_gets_the_length_of_signal_*/\CE{}}}
\L{\LB{}\Tab{4}{\}}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\V{rewind}(\V{in});}\Tab{16}{\C{}/*_back_to_starting_of_file_*/\CE{}}}
\L{\LB{}\Tab{4}{\V{nh}_=_\V{n}/(\V{level}*\N{2});}\Tab{24}{\C{}/*_size_of_the_coefficients_*/\CE{}}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\C{}/***_allocate_memory_for_the_arrays_***/\CE{}}}
\L{\LB{}\Tab{4}{\V{f}=(\K{double}_*)\V{calloc}(\V{n},\K{sizeof}(\K{double}));}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\V{a}=(\K{double}_*)\V{calloc}(\V{n},\K{sizeof}(\K{double}));_}}
\L{\LB{}\Tab{4}{\V{d}=(\K{double}_*)\V{calloc}(\V{n},\K{sizeof}(\K{double}));_}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\V{A}=(\K{double}_*)\V{calloc}(\V{n},\K{sizeof}(\K{double}));}}
\L{\LB{}\Tab{4}{\V{D}=(\K{double}_*)\V{calloc}(\V{n},\K{sizeof}(\K{double}));}}
\L{\LB{}}
\L{\LB{}\Tab{4}{\C{}/***_read_input_data_from_input_file_***/\CE{}}}
\L{\LB{}\Tab{4}{\K{for}(\V{i}=\N{0};\V{i}_\<_\V{n};\V{i}++)\{}}
\L{\LB{}\Tab{8}{\V{fscanf}(\V{in},\S{}\3\%lf\3\SE{},\&\V{f}[\V{i}]);}}
\L{\LB{}\Tab{8}{\V{a}[\V{i}]=\V{f}[\V{i}];}\Tab{20}{\C{}/*_also_store_in_a_*/\CE{}}}
\L{\LB{}\Tab{8}{\V{d}[\V{i}]=\V{f}[\V{i}];}\Tab{20}{\C{}/*_also_store_in_d_*/\CE{}}}
\L{\LB{}\Tab{4}{\}}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\C{}/***_call_the_functions_***/\CE{}}}
\L{\LB{}\Tab{4}{\V{dwt}(\V{a},\V{d},\V{n},\V{vanish},\V{level});}\Tab{32}{\C{}/*_to_find_the_a_and_d_subsignals_*/\CE{}}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\C{}/***_store_a_and_d_values_in_A_and_D_***/\CE{}}}
\L{\LB{}\Tab{4}{\K{for}(\V{i}=\N{0};\V{i}_\<_\V{n};\V{i}++)\{}}
\L{\LB{}\Tab{8}{\V{A}[\V{i}]=\V{a}[\V{i}];}}
\L{\LB{}\Tab{8}{\V{D}[\V{i}]=\V{d}[\V{i}];}}
\L{\LB{}\Tab{4}{\}}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\V{recon}(\V{A},\V{D},\V{n},\V{vanish},\V{level});}\Tab{32}{\C{}/*_reconstruct_averaged_and_detail_}}
\L{\LB{}\Tab{23}{signals_from_subsignals_*/\CE{}}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\C{}/***_print_the_dwt_coefficients_***/\CE{}}}
\L{\LB{}\Tab{4}{\V{fprintf}(\V{out1},\S{}\3\#_The_subsignal_(db\%d_\-_Level_\%d):\2n\3\SE{},\V{vanish},\V{level});}}
\L{\LB{}\Tab{4}{\V{fprintf}(\V{out1},\S{}\3\#_Trend_(a)_\2tFluctuation_(d)\2n\3\SE{});}}
\L{\LB{}\Tab{4}{\K{for}(\V{i}=\N{0};\V{i}\<_\V{nh};\V{i}++)}}
\L{\LB{}\Tab{8}{\V{fprintf}(\V{out1},\S{}\3\%12.6f\2t\%12.6f\2n\3\SE{},\V{a}[\V{i}],\V{d}[\V{i}]);}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\C{}/***_print_the_approximations_and_details_***/\CE{}}}
\L{\LB{}\Tab{4}{\V{fprintf}(\V{out2},\S{}\3\#_The_reconstructed_signals_(db\%d_\-_Level_\%d):\2n\3\SE{},\V{vanish},\V{level});}}
\L{\LB{}\Tab{4}{\V{fprintf}(\V{out2},\S{}\3\#_Averaged_(A)\2tDetail_(D)\2n\3\SE{});}}
\L{\LB{}\Tab{4}{\K{for}(\V{i}=\N{0};\V{i}\<_\V{n};\V{i}++)}}
\L{\LB{}\Tab{8}{\V{fprintf}(\V{out2},\S{}\3\%12.6f\2t\%12.6f\2n\3\SE{},\V{A}[\V{i}],\V{D}[\V{i}]);}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\C{}/***_free_the_memory_spaces_***/\CE{}}}
\L{\LB{}\Tab{4}{\V{free}(\V{f});}}
\L{\LB{}\Tab{4}{\V{free}(\V{a});}}
\L{\LB{}\Tab{4}{\V{free}(\V{d});}}
\L{\LB{}\Tab{4}{\V{free}(\V{A});}}
\L{\LB{}\Tab{4}{\V{free}(\V{D});}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\C{}/***_close_the_files_***/\CE{}}}
\L{\LB{}\Tab{4}{\V{fclose}(\V{in});}}
\L{\LB{}\Tab{4}{\V{fclose}(\V{out1});}}
\L{\LB{}\Tab{4}{\V{fclose}(\V{out2});}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\K{return}_\N{0};}}
\L{\LB{\}}}
